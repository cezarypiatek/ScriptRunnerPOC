<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:ScriptRunner.GUI.Views"
        xmlns:avalonia="clr-namespace:Projektanker.Icons.Avalonia;assembly=Projektanker.Icons.Avalonia"
        mc:Ignorable="d" 
        Width="500"
        Height="300"
        x:Class="ScriptRunner.GUI.Views.VaultPicker"
        WindowStartupLocation="CenterOwner"
        Title="Select Vault Secret"
        Background="#212222"
        FontFamily="Segoe UI Variable">
    <Design.DataContext>
      <vm:VaultPickerViewModel />
    </Design.DataContext>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="Auto"></RowDefinition>
        </Grid.RowDefinitions>
        
        <!-- Content Section -->
        <Border Grid.Row="0" Margin="15,15,15,10" Padding="20" 
                BorderThickness="1" BorderBrush="#4E4E4E" 
                Background="#2B2B2B" CornerRadius="3">
            <StackPanel Spacing="15">
                <!-- Secret Selection -->
                <StackPanel Spacing="8">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <avalonia:Icon Value="fas fa-lock" FontSize="14" Foreground="#85DFFF" VerticalAlignment="Center"/>
                        <TextBlock Text="Secret Key" FontWeight="SemiBold" VerticalAlignment="Center"/>
                    </StackPanel>
                    <ComboBox Name="SecretsCombo" 
                              ItemsSource="{Binding Entries}" 
                              SelectedItem="{Binding SelectedEntry, Mode=TwoWay}"
                              HorizontalAlignment="Stretch"
                              Background="#1e1e1e"
                              MinHeight="32">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Name}" />
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                </StackPanel>
                
                <!-- Remember Binding Option -->
                <Border BorderThickness="1" BorderBrush="#4E4E4E" 
                        Background="#252525" CornerRadius="3" Padding="12">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <CheckBox Name="Remember" VerticalAlignment="Center"/>
                        <StackPanel Spacing="2">
                            <TextBlock Text="Remember this binding" FontWeight="SemiBold"/>
                            <TextBlock Text="This secret will be automatically selected next time" 
                                       FontSize="12" 
                                       Foreground="#B0B0B0"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>
        
        <!-- Bottom Action Bar -->
        <Border Grid.Row="1" BorderThickness="0,1,0,0" BorderBrush="#4E4E4E" 
                Background="#252525" Padding="15">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="10">
                <Button Click="Accept"
                        Padding="20,8"
                        MinWidth="120"
                        Background="#007BFF"
                        Classes="primary">
                    <Button.Styles>
                        <Style Selector="Button:pointerover /template/ ContentPresenter">
                            <Setter Property="Background" Value="#0056D2" />
                        </Style>
                    </Button.Styles>
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <avalonia:Icon Value="fas fa-check" FontSize="14"/>
                        <TextBlock Text="Use Secret" FontWeight="SemiBold"/>
                    </StackPanel>
                </Button>
            </StackPanel>
        </Border>
    </Grid>
</Window>
